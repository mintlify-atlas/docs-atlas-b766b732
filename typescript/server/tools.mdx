---
title: 'Tools'
description: 'Create AI-callable tools'
icon: 'wrench'
---

# Tools

Tools are functions that AI models can discover and call. They're the primary way to extend AI capabilities with custom logic.

## Basic Tool

Create a simple tool:

```typescript
import { MCPServer, text } from 'mcp-use/server';
import { z } from 'zod';

const server = new MCPServer({
  name: 'my-server',
  version: '1.0.0'
});

server.tool(
  {
    name: 'greet',
    description: 'Greet a user by name',
    schema: z.object({
      name: z.string().describe('The name to greet')
    })
  },
  async ({ name }) => {
    return text(`Hello, ${name}!`);
  }
);
```

## Tool Definition

### Required Fields

<ParamField path="name" type="string" required>
  Unique identifier for the tool. Use kebab-case.
</ParamField>

<ParamField path="description" type="string">
  What the tool does. Be specific - models use this to decide when to call the tool.
</ParamField>

<ParamField path="schema" type="ZodObject">
  Zod schema defining input parameters. Provides automatic validation and type safety.
</ParamField>

### Optional Fields

<ParamField path="title" type="string">
  Human-readable display name
</ParamField>

<ParamField path="annotations" type="ToolAnnotations">
  Metadata for discovery and presentation
</ParamField>

<ParamField path="widget" type="ToolWidgetConfig">
  Configuration for tools that return widgets. See [Widgets Guide](/typescript/server/widgets).
</ParamField>

## Input Validation

Use Zod schemas for type-safe input validation:

```typescript
server.tool(
  {
    name: 'create-user',
    description: 'Create a new user account',
    schema: z.object({
      // Required string
      email: z.string().email(),
      
      // Optional with default
      role: z.enum(['user', 'admin']).default('user'),
      
      // Number with constraints
      age: z.number().int().min(18),
      
      // Nested object
      profile: z.object({
        name: z.string(),
        bio: z.string().optional()
      }),
      
      // Array
      tags: z.array(z.string()).min(1)
    })
  },
  async ({ email, role, age, profile, tags }) => {
    // Types are automatically inferred!
    // email: string
    // role: 'user' | 'admin'
    // age: number
    // etc.
    
    const user = await createUser({ email, role, age, profile, tags });
    return object({ success: true, user });
  }
);
```

## Response Helpers

Use typed response helpers:

### Text Response

```typescript
import { text } from 'mcp-use/server';

return text('Plain text response');
```

### JSON Object

```typescript
import { object } from 'mcp-use/server';

return object({
  status: 'success',
  data: { id: 123 }
});
```

### Markdown

```typescript
import { markdown } from 'mcp-use/server';

return markdown(`
# Results

Found **3 items**:
1. Item A
2. Item B
3. Item C
`);
```

### Images

```typescript
import { image } from 'mcp-use/server';

// Base64 data
return image(base64Data, 'image/png');

// Data URL
return image('data:image/png;base64,...', 'image/png');
```

### Error Response

```typescript
import { error } from 'mcp-use/server';

if (!userId) {
  return error('User ID is required');
}
```

## Context Access

Tools receive an enhanced context as the second parameter:

```typescript
server.tool(
  {
    name: 'get-user-info',
    description: 'Get current user information'
  },
  async (params, ctx) => {
    // OAuth user info (when OAuth is configured)
    const user = ctx.auth.user;
    const email = ctx.auth.user.email;
    
    // HTTP request context
    const userAgent = ctx.req.header('user-agent');
    const origin = ctx.req.url.origin;
    
    // LLM sampling
    const result = await ctx.sample({
      messages: [{
        role: 'user',
        content: { type: 'text', text: 'Analyze this' }
      }]
    });
    
    // Progress reporting
    await ctx.reportProgress({
      progress: 50,
      total: 100
    });
    
    return object({ user, userAgent, origin });
  }
);
```

## Async Operations

Tools can perform async operations:

```typescript
server.tool(
  {
    name: 'fetch-data',
    description: 'Fetch data from external API',
    schema: z.object({
      url: z.string().url()
    })
  },
  async ({ url }) => {
    // Report progress
    await ctx.reportProgress({ progress: 0, total: 100 });
    
    const response = await fetch(url);
    await ctx.reportProgress({ progress: 50, total: 100 });
    
    const data = await response.json();
    await ctx.reportProgress({ progress: 100, total: 100 });
    
    return object(data);
  }
);
```

## Sampling (LLM Calls)

Request LLM completions from clients:

```typescript
server.tool(
  {
    name: 'analyze-text',
    schema: z.object({
      text: z.string()
    })
  },
  async ({ text }, ctx) => {
    const result = await ctx.sample({
      messages: [
        {
          role: 'user',
          content: {
            type: 'text',
            text: `Analyze the sentiment of this text: ${text}`
          }
        }
      ],
      maxTokens: 100,
      temperature: 0.7
    });
    
    return text(result.content.text);
  }
);
```

## Elicitation (User Input)

Request additional input from users:

```typescript
server.tool(
  {
    name: 'configure-settings',
    description: 'Configure user settings'
  },
  async (params, ctx) => {
    // Request form input
    const result = await ctx.elicit({
      mode: 'form',
      title: 'Configure Settings',
      description: 'Please provide your preferences',
      schema: {
        type: 'object',
        properties: {
          theme: {
            type: 'string',
            enum: ['light', 'dark', 'auto'],
            title: 'Theme'
          },
          notifications: {
            type: 'boolean',
            title: 'Enable Notifications'
          }
        },
        required: ['theme']
      }
    });
    
    if (result.action === 'accept') {
      // User provided input
      return object({
        success: true,
        settings: result.content
      });
    } else {
      // User cancelled
      return error('Settings configuration cancelled');
    }
  }
);
```

## Tool with Widget

Return interactive UI components:

```typescript
import { widget } from 'mcp-use/server';

server.tool(
  {
    name: 'show-chart',
    description: 'Display data as a chart',
    schema: z.object({
      data: z.array(z.number())
    }),
    widget: {
      name: 'chart-widget',
      invoking: 'Generating chart...',
      invoked: 'Chart ready'
    }
  },
  async ({ data }) => {
    return widget({
      // Data for the widget (not shown to model)
      props: { data, type: 'bar' },
      
      // Summary for the model
      output: text(`Chart with ${data.length} data points`)
    });
  }
);
```

See [Widgets Guide](/typescript/server/widgets) for details.

## Error Handling

### Validation Errors

Zod automatically validates input:

```typescript
server.tool(
  {
    name: 'divide',
    schema: z.object({
      a: z.number(),
      b: z.number()
    })
  },
  async ({ a, b }) => {
    // Input is already validated as numbers
    if (b === 0) {
      return error('Division by zero is not allowed');
    }
    
    return object({ result: a / b });
  }
);
```

### Try-Catch

Handle unexpected errors:

```typescript
server.tool(
  {
    name: 'external-api',
    schema: z.object({ query: z.string() })
  },
  async ({ query }) => {
    try {
      const response = await fetch(`https://api.example.com/search?q=${query}`);
      const data = await response.json();
      return object(data);
    } catch (err) {
      return error(`API request failed: ${err.message}`);
    }
  }
);
```

## Best Practices

### 1. Clear Descriptions

```typescript
// Good
server.tool({
  name: 'search-users',
  description: 'Search for users by email, name, or ID. Returns user profile data.'
});

// Bad
server.tool({
  name: 'search',
  description: 'Searches'
});
```

### 2. Input Validation

Always use Zod schemas:

```typescript
// Good
schema: z.object({
  email: z.string().email(),
  age: z.number().int().min(0)
})

// Bad
schema: z.object({
  email: z.string(),
  age: z.any()
})
```

### 3. Structured Output

Return structured data:

```typescript
// Good
return object({
  success: true,
  user: { id, name, email },
  timestamp: new Date().toISOString()
});

// Less good
return text('User created successfully');
```

### 4. Error Handling

Provide clear error messages:

```typescript
// Good
if (!userId) {
  return error('User ID is required. Please provide a valid user ID.');
}

// Bad
return error('Error');
```

## Examples

### File Operations

```typescript
server.tool(
  {
    name: 'read-file',
    description: 'Read file contents',
    schema: z.object({
      path: z.string()
    })
  },
  async ({ path }) => {
    try {
      const content = await fs.readFile(path, 'utf-8');
      return text(content);
    } catch (err) {
      return error(`Failed to read file: ${err.message}`);
    }
  }
);
```

### Database Query

```typescript
server.tool(
  {
    name: 'query-users',
    description: 'Query users from database',
    schema: z.object({
      role: z.enum(['user', 'admin']).optional(),
      limit: z.number().int().min(1).max(100).default(10)
    })
  },
  async ({ role, limit }) => {
    const users = await db.users.findMany({
      where: role ? { role } : {},
      take: limit
    });
    
    return object({ users, count: users.length });
  }
);
```

### External API

```typescript
server.tool(
  {
    name: 'fetch-weather',
    description: 'Get weather for a city',
    schema: z.object({
      city: z.string()
    })
  },
  async ({ city }, ctx) => {
    const apiKey = process.env.WEATHER_API_KEY;
    
    const response = await fetch(
      `https://api.weather.com/v1/current?city=${city}&key=${apiKey}`
    );
    
    if (!response.ok) {
      return error(`Weather API error: ${response.statusText}`);
    }
    
    const weather = await response.json();
    return object(weather);
  }
);
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Resources" icon="database" href="/typescript/server/resources">
    Learn about serving data
  </Card>
  <Card title="Widgets" icon="window" href="/typescript/server/widgets">
    Create interactive UIs
  </Card>
  <Card title="OAuth" icon="lock" href="/typescript/server/oauth">
    Add authentication
  </Card>
  <Card title="API Reference" icon="book" href="/typescript/api/server">
    Complete API documentation
  </Card>
</CardGroup>